# LSTM 기반 날씨 예측 시스템

## 프로젝트 개요

이 프로젝트는 LSTM(Long Short-Term Memory) 신경망을 활용하여 기상청 API에서 수집한 과거 데이터를 기반으로 서울 지역의 미래 날씨를 예측하는 시스템입니다. 3계층 아키텍처로 구성되어 데이터 수집부터 시각화까지 전체 파이프라인을 구현했습니다.

## 🏗️ 시스템 아키텍처

```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│  Next.js    │ --> │ Spring Boot │ --> │   Python    │
│ 프론트엔드   │ <-- │   백엔드    │ <-- │ LSTM 모델   │
└─────────────┘     └─────────────┘     └─────────────┘
      :3000              :8080               :8000
```

## 🧩 주요 구성요소

### 🐍 Python 머신러닝 모델 (포트 8000)
- **FastAPI 기반 예측 서버**: 모델 학습 및 예측 API 제공
- **LSTM 모델**: 서울 기상 데이터 기반 12개월 예측 수행
- **비동기 데이터 수집**: 기상청 API에서 효율적인 데이터 수집
- **핵심 모듈**:
  - `ClimatePredictor`: 예측 엔진 및 모델 통합
  - `WeatherDataCollector`: 비동기 API 통신 및 데이터 처리
  - `ModelManager`: 모델 저장/로드 및 데이터 전처리

### ☕ Spring Boot 백엔드 (포트 8080)
- **중간 API 계층**: Python 모델과 프론트엔드 연결
- **CORS 설정**: 프론트엔드 접근 허용
- **컨트롤러**:
  - `WeatherController`: FastAPI 서버와 통신
  - `PingPongController`: API 테스트 엔드포인트

### ⚛️ Next.js 프론트엔드 (포트 3000)
- **직관적 UI**: 날씨 예측 결과 테이블 시각화
- **API 테스트 페이지**: 서버 연결 및 기능 테스트

## ✨ 주요 기능

### 📊 데이터 파이프라인
- **데이터 수집**: 기상청 API에서 2016년부터 현재까지 서울 기상 데이터 수집
- **전처리**: MinMaxScaler로 정규화, 12개월 시퀀스 윈도우 생성
- **모델링**: LSTM 네트워크 학습 및 저장
- **예측**: 미래 12개월의 평균기온, 최고/최저기온, 습도 예측

### 🧠 LSTM 모델 구조
- **입력**: 12개월 시퀀스, 4개 특성(평균/최고/최저 기온, 습도)
- **아키텍처**:
  - LSTM 레이어(50유닛) + Dropout(20%)
  - LSTM 레이어(50유닛) + Dropout(20%)
  - Dense 출력층(4유닛)
- **학습 설정**:
  - 최적화: Adam(lr=0.001)
  - 손실함수: Mean Squared Error
  - Early Stopping: val_loss 10회 개선 없을 시

### 🌐 API 엔드포인트
- **FastAPI 서버**:
  - `GET /health`: 서버 상태 확인
  - `GET /predict`: 날씨 예측 결과 제공
  - `POST /train`: 모델 재학습
- **Spring Boot 백엔드**:
  - `GET /weather`: FastAPI 예측 결과 중계
  - `GET/POST /api/*`: 테스트용 엔드포인트

## 🛠️ 설치 및 실행

### 사전 요구사항
- JDK 17+
- Python 3.8+
- Node.js 16+
- 기상청 API 키

### 환경 설정
1. 프로젝트 루트에 `.project_root` 파일 생성
2. `.env` 파일에 기상청 API 키 설정:
   ```
   WEATHER_API_KEY=your_api_key_here
   ```

### 실행 방법
```bash
# 1. Python 모델 서버 실행
cd models/weather
python app.py

# 2. Spring Boot 백엔드 실행
cd be
./gradlew bootRun

# 3. Next.js 프론트엔드 실행
cd fe
pnpm install
pnpm dev
```

## 📈 데이터 흐름

1. **데이터 수집 단계**:
   - 기상청 API에서 비동기적으로 월별 기상 데이터 수집
   - XML 응답 파싱 및 데이터프레임 변환

2. **모델 학습 단계**:
   - 데이터 정규화 및 시퀀스 생성
   - LSTM 모델 학습 및 저장
   - 마지막 시퀀스 보존(예측용)

3. **예측 및 시각화 단계**:
   - 저장된 모델로 미래 12개월 예측
   - Spring Boot를 통해 프론트엔드로 전달
   - 테이블 형태로 시각화

## 🔧 기술 스택

### Python 모델
- **프레임워크**: FastAPI, Keras/TensorFlow
- **데이터 처리**: NumPy, Pandas, scikit-learn
- **비동기 통신**: aiohttp

### Spring Boot 백엔드
- **언어**: Kotlin
- **프레임워크**: Spring Boot
- **보안**: Spring Security

### Next.js 프론트엔드
- **프레임워크**: Next.js, React
- **스타일링**: Tailwind CSS

## 🚀 향후 개발 방향

### 모델 개선
- 더 다양한 기상 변수 활용 (강수량, 기압, 풍속 등)
- 하이퍼파라미터 최적화 및 앙상블 모델링
- 전이학습 적용으로 정확도 향상

### 기능 확장
- 다중 지역 예측 지원
- 예측 신뢰도 지표 추가
- 과거 예측 정확도 분석 기능

### 인프라 개선
- 도커 컨테이너화 및 배포 자동화
- 정기적 자동 재학습 체계 구축
- 클라우드 환경 최적화

## 💡 특이사항

- **자동 학습**: 저장된 모델이 없을 경우 자동으로 데이터 수집 및 학습 수행
- **비동기 처리**: 효율적인 API 요청 및 데이터 처리
- **확장성**: 3계층 아키텍처로 각 컴포넌트 독립적 개발 가능
- **유지보수성**: 모듈화된 코드 구조로 쉬운 기능 확장

## 결론

이 시스템은 LSTM 신경망의 시계열 예측 능력을 활용하여 과거 기상 데이터를 분석하고 미래 날씨를 예측합니다. 현대적인 웹 기술과 머신러닝을 결합하여 직관적인 사용자 경험을 제공하는 완전한 날씨 예측 솔루션입니다.